@page "/play-solo"
@using SC2APIProtocol
@using Web.Components.InitConnection
@using Web.Components.InitGame
@using Web.Services
@rendermode InteractiveServer
@inject ClientManager clientManager

<PageTitle>Play Solo</PageTitle>

<div class="flex">
  <div>
    <ConnectionManager Key=@Key />
  </div>
  <div>
    <HeadlessClientManager Key=@Key />
  </div>
</div>


<div class="container mx-auto p-4">
  <div class="flex items-center mb-4">
    <h1 class="text-2xl font-bold text-white">Play Solo vs Bot</h1>
  </div>

  <CreateOrLeaveGame Key=@Key />

  <GameState Key=@Key />

  <RequestHistory Key=@Key />

</div>

@code {

  private string Key = "Solo";
  private SC2Client sc2Client = default!;
  protected override void OnInitialized()
  {
    var group = clientManager.GetOrCreateGroup(Key);
    sc2Client = group.SC2Client;
  }

}