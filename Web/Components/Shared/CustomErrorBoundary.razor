@inherits ErrorBoundary

@if (CurrentException is null)
{
  @ChildContent
}
else
{
  <div class="bg-red-900/20 border border-red-500/50 text-red-200 px-4 py-3 rounded relative my-4" role="alert">
    <strong class="font-bold text-red-400">An error occurred:</strong>
    <span class="block sm:inline">@CurrentException.Message</span>
    @if (!string.IsNullOrEmpty(CurrentException.StackTrace))
    {
      <details class="mt-2">
        <summary class="cursor-pointer text-sm font-semibold hover:text-red-300 transition-colors">Stack Trace</summary>
        <pre
          class="mt-2 text-xs overflow-auto p-2 bg-gray-900/50 text-red-300 rounded max-h-48 border border-red-500/20">@CurrentException.StackTrace</pre>
      </details>
    }
    <button
      class="mt-3 bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded text-sm transition-colors shadow-sm"
      @onclick="Recover">
      Retry
    </button>
  </div>
}

@code {
  protected override void OnParametersSet()
  {
    Recover();
  }
}